<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc?>
<?asciidoc-numbered?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="zh">
<info>
<title>æ•°æ®åŸºç¡€</title>
<date>2025-11-15</date>
<copyright>
<holder>zigbook</holder>
</copyright>
</info>
<chapter xml:id="overview">
<title>æ¦‚è¿°</title>
<simpara>æ§åˆ¶æµåªæœ‰åœ¨å®ƒæ“ä½œçš„æ•°æ®æœ‰ç”¨æ—¶æ‰æœ‰æ•ˆï¼Œå› æ­¤æœ¬ç« å°†Zigçš„æ ¸å¿ƒé›†åˆç±»å‹â€”â€”æ•°ç»„ã€åˆ‡ç‰‡å’Œå“¨å…µç»ˆæ­¢å­—ç¬¦ä¸²â€”â€”åŸºäºå®é™…ä½¿ç”¨ï¼ŒåŒæ—¶ä¿æŒå€¼è¯­ä¹‰çš„æ˜¾å¼æ€§ã€‚å‚è§<link xl:href="https://ziglang.org/documentation/master/#Arrays">#Arrays</link>å’Œ<link xl:href="https://ziglang.org/documentation/master/#Slices">#Slices</link>ä½œä¸ºå‚è€ƒã€‚</simpara>
<simpara>æˆ‘ä»¬è¿˜ä½¿æŒ‡é’ˆã€å¯é€‰ç±»å‹å’Œå‹å¥½å¯¹é½çš„è½¬æ¢å˜å¾—å¸¸è§„ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ä¿ç•™è¾¹ç•Œæ£€æŸ¥å’Œå¯¹å¯å˜æ€§çš„æ¸…æ™°æ€§çš„åŒæ—¶å®‰å…¨åœ°é‡æ–°è§£é‡Šå†…å­˜ã€‚å‚è§<link xl:href="https://ziglang.org/documentation/master/#Pointers">#Pointers</link>å’Œ<link xl:href="https://ziglang.org/documentation/master/#alignCast">#alignCast</link>è·å–è¯¦ç»†ä¿¡æ¯ã€‚</simpara>
<section xml:id="type-system-context">
<title>Zigçš„ç±»å‹ç³»ç»Ÿç±»åˆ«</title>
<simpara>åœ¨æ·±å…¥æ¢è®¨ç‰¹å®šçš„é›†åˆç±»å‹ä¹‹å‰ï¼Œäº†è§£æ•°ç»„ã€åˆ‡ç‰‡å’ŒæŒ‡é’ˆåœ¨Zigç±»å‹ç³»ç»Ÿä¸­çš„ä½ç½®æ˜¯æœ‰å¸®åŠ©çš„ã€‚Zigä¸­çš„æ¯ä¸ªç±»å‹éƒ½å±äºä¸€ä¸ªç±»åˆ«ï¼Œæ¯ä¸ªç±»åˆ«æä¾›ç‰¹å®šçš„æ“ä½œï¼š</simpara>
<literallayout class="monospaced">graph TB
    subgraph "Type Categories"
        PRIMITIVE["Primitive Types&lt;br/&gt;bool, u8, i32, f64, void, ..."]
        POINTER["Pointer Types&lt;br/&gt;*T, [*]T, []T, [:0]T"]
        AGGREGATE["Aggregate Types&lt;br/&gt;struct, array, tuple"]
        FUNCTION["Function Types&lt;br/&gt;fn(...) ReturnType"]
        SPECIAL["Special Types&lt;br/&gt;anytype, type, comptime_int"]
    end

    subgraph "Common Type Operations"
        ABISIZE["abiSize()&lt;br/&gt;Byte size in memory"]
        ABIALIGN["abiAlignment()&lt;br/&gt;Required alignment"]
        HASRUNTIME["hasRuntimeBits()&lt;br/&gt;Has runtime storage?"]
        ELEMTYPE["elemType()&lt;br/&gt;Element type (arrays/slices)"]
    end

    PRIMITIVE --&gt; ABISIZE
    POINTER --&gt; ABISIZE
    AGGREGATE --&gt; ABISIZE

    PRIMITIVE --&gt; ABIALIGN
    POINTER --&gt; ABIALIGN
    AGGREGATE --&gt; ABIALIGN

    POINTER --&gt; ELEMTYPE
    AGGREGATE --&gt; ELEMTYPE</literallayout>
<simpara>æœ¬ç« çš„å…³é”®è§è§£ï¼š</simpara>
<itemizedlist>
<listitem>
<simpara><emphasis role="strong">æ•°ç»„</emphasis>æ˜¯å…·æœ‰ç¼–è¯‘æ—¶å·²çŸ¥é•¿åº¦çš„èšåˆç±»å‹â€”â€”å®ƒä»¬çš„å¤§å°æ˜¯<literal>element_size * length</literal></simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">åˆ‡ç‰‡</emphasis>æ˜¯å­˜å‚¨æŒ‡é’ˆå’Œè¿è¡Œæ—¶é•¿åº¦çš„æŒ‡é’ˆç±»å‹â€”â€”å§‹ç»ˆæ˜¯2 Ã— æŒ‡é’ˆå¤§å°</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">æŒ‡é’ˆ</emphasis>æœ‰å¤šç§å½¢çŠ¶ï¼ˆå•é¡¹ç›®<literal>*T</literal>ã€å¤šé¡¹ç›®<literal>[*]T</literal>ã€åˆ‡ç‰‡<literal>[]T</literal>ï¼‰ï¼Œå…·æœ‰ä¸åŒçš„å®‰å…¨ä¿è¯</simpara>
</listitem>
<listitem>
<simpara>æ‰€æœ‰ç±»å‹éƒ½æš´éœ²å®ƒä»¬çš„å¤§å°å’Œå¯¹é½æ–¹å¼ï¼Œè¿™ä¼šå½±å“ç»“æ„ä½“å¸ƒå±€å’Œå†…å­˜åˆ†é…</simpara>
</listitem>
</itemizedlist>
<simpara>è¿™ç§ç±»å‹æ„ŸçŸ¥è®¾è®¡è®©ç¼–è¯‘å™¨èƒ½å¤Ÿåœ¨åˆ‡ç‰‡ä¸Šå¼ºåˆ¶æ‰§è¡Œè¾¹ç•Œæ£€æŸ¥ï¼ŒåŒæ—¶åœ¨ä½ æ˜ç¡®é€‰æ‹©é€€å‡ºå®‰å…¨æ€§æ—¶å…è®¸åœ¨å¤šé¡¹ç›®æŒ‡é’ˆä¸Šè¿›è¡ŒæŒ‡é’ˆç®—æœ¯ã€‚</simpara>
</section>
</chapter>
<chapter xml:id="learning-goals">
<title>å­¦ä¹ ç›®æ ‡</title>
<itemizedlist>
<listitem>
<simpara>åŒºåˆ†æ•°ç»„å€¼è¯­ä¹‰ä¸åˆ‡ç‰‡è§†å›¾ï¼ŒåŒ…æ‹¬ç”¨äºå®‰å…¨å›é€€çš„é›¶é•¿åº¦æƒ¯ç”¨æ³•ã€‚</simpara>
</listitem>
<listitem>
<simpara>å¯¼èˆªæŒ‡é’ˆå½¢çŠ¶ï¼ˆ<literal>*T</literal>ã€<literal>[*]T</literal>ã€<literal>?*T</literal>ï¼‰å¹¶åœ¨ä¸ç‰ºç‰²å®‰å…¨å·¥å…·çš„æƒ…å†µä¸‹è§£åŒ…å¯é€‰ç±»å‹ï¼ˆå‚è§<link xl:href="https://ziglang.org/documentation/master/#Optionals">#Optionals</link>ï¼‰ã€‚</simpara>
</listitem>
<listitem>
<simpara>åœ¨ä¸å…¶ä»–APIäº’æ“ä½œæ—¶åº”ç”¨å“¨å…µç»ˆæ­¢å­—ç¬¦ä¸²å’Œå¯¹é½æ„ŸçŸ¥è½¬æ¢ï¼ˆ<literal>@alignCast</literal>ã€<literal>@bitCast</literal>ã€<literal>@intCast</literal>ï¼‰ï¼ˆå‚è§<link xl:href="https://ziglang.org/documentation/master/#Sentinel-Terminated-Pointers">#Sentinel-Terminated-Pointers</link>å’Œ<link xl:href="https://ziglang.org/documentation/master/#Explicit-Casts">#Explicit-Casts</link>ï¼‰ã€‚</simpara>
</listitem>
</itemizedlist>
</chapter>
<chapter xml:id="section-1">
<title>åœ¨å†…å­˜ä¸­ç»“æ„åŒ–é›†åˆ</title>
<simpara>æ•°ç»„æ‹¥æœ‰å­˜å‚¨è€Œåˆ‡ç‰‡å€Ÿç”¨å®ƒï¼Œå› æ­¤ç¼–è¯‘å™¨åœ¨é•¿åº¦ã€å¯å˜æ€§å’Œç”Ÿå‘½å‘¨æœŸæ–¹é¢å¼ºåˆ¶æ‰§è¡Œä¸åŒçš„ä¿è¯ï¼›æŒæ¡å®ƒä»¬çš„ç›¸äº’ä½œç”¨ä½¿è¿­ä»£å¯é¢„æµ‹ï¼Œå¹¶å°†å¤§å¤šæ•°è¾¹ç•Œæ£€æŸ¥ç§»åˆ°è°ƒè¯•æ„å»ºä¸­ã€‚</simpara>
<section xml:id="section-1-sub-a">
<title>æ•°ç»„ä½œä¸ºæ‹¥æœ‰çš„å­˜å‚¨</title>
<simpara>æ•°ç»„åœ¨å…¶ç±»å‹ä¸­æºå¸¦é•¿åº¦ï¼ŒæŒ‰å€¼å¤åˆ¶ï¼Œå¹¶ä¸ºä½ æä¾›ä¸€ä¸ªå¯å˜åŸºçº¿ï¼Œä»ä¸­å¯ä»¥åˆ‡å‡ºåªè¯»å’Œè¯»å†™åˆ‡ç‰‡ã€‚</simpara>
<programlisting language="zig" linenumbering="unnumbered">Unresolved directive in 03__data-fundamentals.adoc - include::example$chapters-data/code/03__data-fundamentals/arrays_and_slices.zig[]</programlisting>
<formalpara>
<title>è¿è¡Œ</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">$ zig run arrays_and_slices.zig</programlisting>
</para>
</formalpara>
<formalpara>
<title>è¾“å‡º</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">array len=4 allows mutation
mutable_slice: len=4 head=-3
prefix: len=2 head=-3
values[0] after slice write = -3
empty slice len=0 is zero-length
copy[0]=-1 owned[0]=1
zero slice len=0 from literal</programlisting>
</para>
</formalpara>
<note>
<simpara>å¯å˜åˆ‡ç‰‡å’ŒåŸå§‹æ•°ç»„å…±äº«å­˜å‚¨ï¼Œè€Œ<literal>[]const</literal>å‰ç¼€é˜»æ­¢å†™å…¥â€”â€”è¿™æ˜¯ä¸€ä¸ªæœ‰æ„çš„è¾¹ç•Œï¼Œå¼ºåˆ¶åªè¯»æ¶ˆè´¹è€…ä¿æŒè¯šå®ã€‚</simpara>
</note>
<section xml:id="_memory_layout_arrays_vs_slices">
<title>å†…å­˜å¸ƒå±€ï¼šæ•°ç»„ä¸åˆ‡ç‰‡</title>
<simpara>ç†è§£æ•°ç»„å’Œåˆ‡ç‰‡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€æ–¹å¼é˜æ˜äº†ä¸ºä»€ä¹ˆ"æ•°ç»„æ‹¥æœ‰å­˜å‚¨è€Œåˆ‡ç‰‡å€Ÿç”¨å®ƒ"ä»¥åŠä¸ºä»€ä¹ˆæ•°ç»„åˆ°åˆ‡ç‰‡çš„å¼ºåˆ¶è½¬æ¢æ˜¯ä¸€ä¸ªå»‰ä»·æ“ä½œï¼š</simpara>
<literallayout class="monospaced">graph TB
    subgraph "Array in Memory"
        ARRAY_DECL["const values: [4]i32 = .{1, 2, 3, 4}"]
        ARRAY_MEM["Memory Layout (16 bytes)\n\nstack frame\n| 1 | 2 | 3 | 4 |"]

        ARRAY_DECL --&gt; ARRAY_MEM
    end

    subgraph "Slice in Memory"
        SLICE_DECL["const slice: []const i32 = &amp;values"]
        SLICE_MEM["Memory Layout (16 bytes on 64-bit)\n\nstack frame\n|    ptr    |   len=4   |"]
        POINTS["ptr points to array data"]

        SLICE_DECL --&gt; SLICE_MEM
        SLICE_MEM --&gt; POINTS
    end

    POINTS -.-&gt;|"references"| ARRAY_MEM

    subgraph "Key Differences"
        DIFF1["Array: Stores data inline&lt;br/&gt;Size = elem_size Ã— length"]
        DIFF2["Slice: Stores pointer + length&lt;br/&gt;Size = 2 Ã— pointer_size (16 bytes on 64-bit)"]
        DIFF3["Coercion: &amp;array â†’ slice&lt;br/&gt;Just creates {ptr, len} pair"]
    end</literallayout>
<simpara><emphasis role="strong">ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼š</emphasis></simpara>
<itemizedlist>
<listitem>
<simpara>æ•°ç»„å…·æœ‰<emphasis role="strong">å€¼è¯­ä¹‰</emphasis>ï¼šåˆ†é…æ•°ç»„ä¼šå¤åˆ¶æ‰€æœ‰å…ƒç´ </simpara>
</listitem>
<listitem>
<simpara>åˆ‡ç‰‡å…·æœ‰<emphasis role="strong">å¼•ç”¨è¯­ä¹‰</emphasis>ï¼šåˆ†é…åˆ‡ç‰‡åªå¤åˆ¶æŒ‡é’ˆå’Œé•¿åº¦</simpara>
</listitem>
<listitem>
<simpara>æ•°ç»„åˆ°åˆ‡ç‰‡çš„å¼ºåˆ¶è½¬æ¢ï¼ˆ<literal>&amp;array</literal>ï¼‰æ˜¯å»‰ä»·çš„â€”â€”å®ƒä¸å¤åˆ¶æ•°æ®ï¼Œåªæ˜¯åˆ›å»ºä¸€ä¸ªæè¿°ç¬¦</simpara>
</listitem>
<listitem>
<simpara>åˆ‡ç‰‡æ˜¯"èƒ–æŒ‡é’ˆ"ï¼šå®ƒä»¬æºå¸¦è¿è¡Œæ—¶é•¿åº¦ä¿¡æ¯ï¼Œå¯ç”¨è¾¹ç•Œæ£€æŸ¥</simpara>
</listitem>
</itemizedlist>
<simpara>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‡½æ•°é€šå¸¸æ¥å—åˆ‡ç‰‡ä½œä¸ºå‚æ•°â€”â€”å®ƒä»¬å¯ä»¥ä¸æ•°ç»„ã€åˆ‡ç‰‡ä»¥åŠä¸¤è€…çš„éƒ¨åˆ†ä¸€èµ·å·¥ä½œï¼Œè€Œæ— éœ€å¤åˆ¶åº•å±‚æ•°æ®ã€‚</simpara>
</section>
</section>
<section xml:id="section-1-sub-b">
<title>å®è·µä¸­çš„å­—ç¬¦ä¸²å’Œå“¨å…µ</title>
<simpara>å“¨å…µç»ˆæ­¢æ•°ç»„åœ¨ä¸ç‰ºç‰²åˆ‡ç‰‡å®‰å…¨æ€§çš„æƒ…å†µä¸‹æ¡¥æ¥åˆ°C APIï¼›ä½ å¯ä»¥ä½¿ç”¨<literal>std.mem.span</literal>é‡æ–°è§£é‡Šå­—èŠ‚æµï¼Œå¹¶åœ¨ä¿ç•™å“¨å…µçº¦å®šæ—¶ä»ç„¶å¯ä»¥æ”¹å˜åº•å±‚ç¼“å†²åŒºã€‚</simpara>
<programlisting language="zig" linenumbering="unnumbered">Unresolved directive in 03__data-fundamentals.adoc - include::example$chapters-data/code/03__data-fundamentals/sentinel_strings.zig[]</programlisting>
<formalpara>
<title>è¿è¡Œ</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">$ zig run sentinel_strings.zig</programlisting>
</para>
</formalpara>
<formalpara>
<title>è¾“å‡º</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">literal len=17 contents="data fundamentals"
trimmed slice len=4 -&gt; Labe
full label after mutation: LabeX</programlisting>
</para>
</formalpara>
<simpara>å“¨å…µåˆ‡ç‰‡ä¿æŒå°¾éšé›¶å®Œæ•´ï¼Œå› æ­¤å³ä½¿åœ¨å±€éƒ¨çªå˜åï¼Œä¸ºFFIè·å–<literal>[*:0]u8</literal>ä»ç„¶æœ‰æ•ˆï¼Œè€Œæ™®é€šåˆ‡ç‰‡åœ¨Zigå†…éƒ¨æä¾›ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„è¿­ä»£ï¼ˆå‚è§<link xl:href="https://ziglang.org/documentation/master/#Type-Coercion">#Type-Coercion</link>ï¼‰ã€‚</simpara>
<tip>
<simpara><literal>std.mem.span</literal>å°†å“¨å…µæŒ‡é’ˆè½¬æ¢ä¸ºæ™®é€šåˆ‡ç‰‡è€Œä¸å…‹éš†æ•°æ®ï¼Œå½“ä½ åœ¨è¿”å›æŒ‡é’ˆAPIä¹‹å‰æš‚æ—¶éœ€è¦è¾¹ç•Œæ£€æŸ¥æˆ–åˆ‡ç‰‡åŠ©æ‰‹æ—¶ï¼Œè¿™ä½¿å…¶æˆä¸ºç†æƒ³é€‰æ‹©ã€‚</simpara>
</tip>
</section>
<section xml:id="section-1-sub-c">
<title>ä¸å¯å˜å’Œå¯å˜è§†å›¾</title>
<simpara>å½“è°ƒç”¨è€…åªæ£€æŸ¥æ•°æ®æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨<literal>[]const T</literal>â€”â€”Zigå¾ˆä¹æ„å°†å¯å˜åˆ‡ç‰‡å¼ºåˆ¶è½¬æ¢ä¸ºconstè§†å›¾ï¼Œä¸ºä½ æä¾›APIæ¸…æ™°åº¦ï¼Œå¹¶ä»ä¸€å¼€å§‹å°±é˜²æ­¢æ„å¤–å†™å…¥ç¼–è¯‘ã€‚</simpara>
</section>
</chapter>
<chapter xml:id="section-2">
<title>æŒ‡é’ˆæ¨¡å¼å’Œè½¬æ¢å·¥ä½œæµ</title>
<simpara>å½“ä½ å…±äº«å­˜å‚¨ã€ä¸å¤–éƒ¨å¸ƒå±€äº’æ“ä½œæˆ–è¶…å‡ºåˆ‡ç‰‡è¾¹ç•Œæ—¶ï¼ŒæŒ‡é’ˆå°±ä¼šå‡ºç°ï¼›é€šè¿‡ä¾èµ–å¯é€‰åŒ…è£…å™¨å’Œæ˜¾å¼è½¬æ¢ï¼Œä½ å¯ä»¥ä¿æŒæ„å›¾æ¸…æ™°ï¼Œå¹¶åœ¨å‡è®¾è¢«æ‰“ç ´æ—¶è§¦å‘å®‰å…¨æ£€æŸ¥ã€‚</simpara>
<section xml:id="pointer-shapes">
<title>æŒ‡é’ˆå½¢çŠ¶å‚è€ƒ</title>
<simpara>Zigæä¾›å¤šç§æŒ‡é’ˆç±»å‹ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„å®‰å…¨ä¿è¯å’Œç”¨ä¾‹ã€‚ç†è§£ä½•æ—¶ä½¿ç”¨æ¯ç§å½¢çŠ¶å¯¹äºç¼–å†™å®‰å…¨ã€é«˜æ•ˆçš„ä»£ç è‡³å…³é‡è¦ï¼š</simpara>
<literallayout class="monospaced">graph TB
    subgraph "Pointer Shapes"
        SINGLE["*T&lt;br/&gt;Single-Item Pointer"]
        MANY["[*]T&lt;br/&gt;Many-Item Pointer"]
        SLICE["[]T&lt;br/&gt;Slice"]
        OPTIONAL["?*T&lt;br/&gt;Optional Pointer"]
        SENTINEL_PTR["[*:0]T&lt;br/&gt;Sentinel Many-Item"]
        SENTINEL_SLICE["[:0]T&lt;br/&gt;Sentinel Slice"]
    end

    subgraph "Characteristics"
        SINGLE --&gt; S_BOUNDS["âœ“ Bounds: Single element&lt;br/&gt;âœ“ Safety: Dereference checked&lt;br/&gt;ğŸ“ Use: Function parameters, references"]

        MANY --&gt; M_BOUNDS["âš  Bounds: Unknown length&lt;br/&gt;âœ— Safety: No bounds checking&lt;br/&gt;ğŸ“ Use: C interop, tight loops"]

        SLICE --&gt; SL_BOUNDS["âœ“ Bounds: Runtime length&lt;br/&gt;âœ“ Safety: Bounds checked&lt;br/&gt;ğŸ“ Use: Most Zig code, iteration"]

        OPTIONAL --&gt; O_BOUNDS["âœ“ Bounds: May be null&lt;br/&gt;âœ“ Safety: Must unwrap first&lt;br/&gt;ğŸ“ Use: Optional references"]

        SENTINEL_PTR --&gt; SP_BOUNDS["âœ“ Bounds: Until sentinel&lt;br/&gt;~ Safety: Sentinel must exist&lt;br/&gt;ğŸ“ Use: C strings, null-terminated"]

        SENTINEL_SLICE --&gt; SS_BOUNDS["âœ“ Bounds: Length + sentinel&lt;br/&gt;âœ“ Safety: Both length and sentinel&lt;br/&gt;ğŸ“ Use: Zig â†” C string bridge"]
    end</literallayout>
<simpara><emphasis role="strong">æ¯”è¾ƒè¡¨æ ¼ï¼š</emphasis></simpara>
<informaltable frame="all" rowsep="1" colsep="1">
<tgroup cols="5">
<colspec colname="col_1" colwidth="20*"/>
<colspec colname="col_2" colwidth="20*"/>
<colspec colname="col_3" colwidth="20*"/>
<colspec colname="col_4" colwidth="20*"/>
<colspec colname="col_5" colwidth="20*"/>
<thead>
<row>
<entry align="left" valign="top">å½¢çŠ¶</entry>
<entry align="left" valign="top">ç¤ºä¾‹</entry>
<entry align="left" valign="top">é•¿åº¦å·²çŸ¥ï¼Ÿ</entry>
<entry align="left" valign="top">è¾¹ç•Œæ£€æŸ¥ï¼Ÿ</entry>
<entry align="left" valign="top">å¸¸è§ç”¨é€”</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara><literal>*T</literal></simpara></entry>
<entry align="left" valign="top"><simpara><literal>*i32</literal></simpara></entry>
<entry align="left" valign="top"><simpara>å•ä¸ªå…ƒç´ </simpara></entry>
<entry align="left" valign="top"><simpara>æ˜¯ï¼ˆéšå¼ï¼‰</simpara></entry>
<entry align="left" valign="top"><simpara>å¼•ç”¨å•ä¸ªé¡¹ç›®</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>[*]T</literal></simpara></entry>
<entry align="left" valign="top"><simpara><literal>[*]i32</literal></simpara></entry>
<entry align="left" valign="top"><simpara>æœªçŸ¥</simpara></entry>
<entry align="left" valign="top"><simpara><emphasis role="strong">å¦</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>Cæ•°ç»„ï¼ŒæŒ‡é’ˆç®—æœ¯</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>[]T</literal></simpara></entry>
<entry align="left" valign="top"><simpara><literal>[]i32</literal></simpara></entry>
<entry align="left" valign="top"><simpara>è¿è¡Œæ—¶ï¼ˆåœ¨åˆ‡ç‰‡ä¸­ï¼‰</simpara></entry>
<entry align="left" valign="top"><simpara><emphasis role="strong">æ˜¯</emphasis></simpara></entry>
<entry align="left" valign="top"><simpara>ä¸»è¦çš„Zigé›†åˆç±»å‹</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>?*T</literal></simpara></entry>
<entry align="left" valign="top"><simpara><literal>?*i32</literal></simpara></entry>
<entry align="left" valign="top"><simpara>å•ä¸ªï¼ˆå¦‚æœéç©ºï¼‰</simpara></entry>
<entry align="left" valign="top"><simpara>æ˜¯ + nullæ£€æŸ¥</simpara></entry>
<entry align="left" valign="top"><simpara>å¯é€‰å¼•ç”¨</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>[*:0]T</literal></simpara></entry>
<entry align="left" valign="top"><simpara><literal>[*:0]u8</literal></simpara></entry>
<entry align="left" valign="top"><simpara>ç›´åˆ°å“¨å…µ</simpara></entry>
<entry align="left" valign="top"><simpara>å“¨å…µå¿…é¡»å­˜åœ¨</simpara></entry>
<entry align="left" valign="top"><simpara>Cå­—ç¬¦ä¸²ï¼ˆ<literal>char*</literal>ï¼‰</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>[:0]T</literal></simpara></entry>
<entry align="left" valign="top"><simpara><literal>[:0]u8</literal></simpara></entry>
<entry align="left" valign="top"><simpara>è¿è¡Œæ—¶ + å“¨å…µ</simpara></entry>
<entry align="left" valign="top"><simpara>æ˜¯ + å“¨å…µä¿è¯</simpara></entry>
<entry align="left" valign="top"><simpara>ç”¨äºC APIçš„Zigå­—ç¬¦ä¸²</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<simpara><emphasis role="strong">æŒ‡å—ï¼š</emphasis></simpara>
<itemizedlist>
<listitem>
<simpara><emphasis role="strong">é»˜è®¤ä½¿ç”¨åˆ‡ç‰‡</emphasis> (<literal>[]T</literal>) ç”¨äºæ‰€æœ‰Zigä»£ç â€”â€”å®ƒä»¬æä¾›å®‰å…¨æ€§å’Œä¾¿åˆ©æ€§</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">ä½¿ç”¨å•é¡¹ç›®æŒ‡é’ˆ</emphasis> (<literal>*T</literal>) å½“ä½ éœ€è¦æ”¹å˜å•ä¸ªå€¼æˆ–é€šè¿‡å¼•ç”¨ä¼ é€’æ—¶</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">é¿å…å¤šé¡¹ç›®æŒ‡é’ˆ</emphasis> (<literal>[*]T</literal>) é™¤éä¸Cæ¥å£äº¤äº’æˆ–åœ¨æ€§èƒ½å…³é”®çš„å†…å¾ªç¯ä¸­</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">ä½¿ç”¨å¯é€‰æŒ‡é’ˆ</emphasis> (<literal>?*T</literal>) å½“nullæ˜¯æœ‰æ„ä¹‰çš„çŠ¶æ€æ—¶ï¼Œä¸ç”¨äºé”™è¯¯å¤„ç†</simpara>
</listitem>
<listitem>
<simpara><emphasis role="strong">ä½¿ç”¨å“¨å…µç±»å‹</emphasis> (<literal>[*:0]T</literal>, <literal>[:0]T</literal>) åœ¨Cè¾¹ç•Œå¤„ï¼Œåœ¨å†…éƒ¨è½¬æ¢ä¸ºåˆ‡ç‰‡</simpara>
</listitem>
</itemizedlist>
</section>
<section xml:id="workflow-1">
<title>ç”¨äºå…±äº«å¯å˜æ€§çš„å¯é€‰æŒ‡é’ˆ</title>
<simpara>å¯é€‰å•é¡¹ç›®æŒ‡é’ˆæš´éœ²å¯å˜æ€§è€Œæ— éœ€çŒœæµ‹ç”Ÿå‘½å‘¨æœŸâ€”â€”ä»…åœ¨å­˜åœ¨æ—¶æ•è·å®ƒä»¬ï¼Œé€šè¿‡è§£å¼•ç”¨è¿›è¡Œçªå˜ï¼Œå¹¶åœ¨æŒ‡é’ˆä¸å­˜åœ¨æ—¶ä¼˜é›…åœ°å›é€€ã€‚</simpara>
<programlisting language="zig" linenumbering="unnumbered">Unresolved directive in 03__data-fundamentals.adoc - include::example$chapters-data/code/03__data-fundamentals/pointers_and_optionals.zig[]</programlisting>
<formalpara>
<title>è¿è¡Œ</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">$ zig run pointers_and_optionals.zig</programlisting>
</para>
</formalpara>
<formalpara>
<title>è¾“å‡º</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">alias -&gt; reading 42
optional pointer empty
optional pointer mutated to 52
slice view len=4
samples[2] via many pointer = 42</programlisting>
</para>
</formalpara>
<simpara><literal>?*Sensor</literal>é—¨å°†çªå˜ä¿æŒåœ¨æ¨¡å¼åŒ¹é…ä¹‹åï¼Œè€Œå¤šé¡¹ç›®æŒ‡é’ˆï¼ˆ<literal>[*]i32</literal>ï¼‰é€šè¿‡ä¸¢å¼ƒè¾¹ç•Œæ£€æŸ¥æ¥è®°å½•åˆ«åé£é™©â€”â€”è¿™æ˜¯ä¸ºç´§å¯†å¾ªç¯å’ŒFFIä¿ç•™çš„æ•…æ„æƒè¡¡ã€‚</simpara>
</section>
<section xml:id="workflow-2">
<title>å¯¹é½å’Œé‡æ–°è§£é‡Šæ•°æ®</title>
<simpara>å½“ä½ å¿…é¡»é‡æ–°è§£é‡ŠåŸå§‹å­—èŠ‚æ—¶ï¼Œä½¿ç”¨è½¬æ¢å†…ç½®å‡½æ•°æ¥æå‡å¯¹é½æ–¹å¼ï¼Œæ›´æ”¹æŒ‡é’ˆå…ƒç´ ç±»å‹ï¼Œå¹¶ä¿æŒæ•´æ•°/æµ®ç‚¹æ•°è½¬æ¢çš„æ˜¾å¼æ€§ï¼Œä»¥ä¾¿è°ƒè¯•æ„å»ºå¯ä»¥æ•è·æœªå®šä¹‰çš„å‡è®¾ï¼ˆå‚è§<link xl:href="https://ziglang.org/documentation/master/#bitCast">#bitCast</link>ï¼‰ã€‚</simpara>
<programlisting language="zig" linenumbering="unnumbered">Unresolved directive in 03__data-fundamentals.adoc - include::example$chapters-data/code/03__data-fundamentals/alignment_and_casts.zig[]</programlisting>
<formalpara>
<title>è¿è¡Œ</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">$ zig run alignment_and_casts.zig</programlisting>
</para>
</formalpara>
<formalpara>
<title>è¾“å‡º</title>
<para>
<programlisting language="shell" linenumbering="unnumbered">32-bit value = 0x11223344
bitcast copy = 0x11223344
truncate -&gt; 0x44, widen -&gt; 287454020
floatCast ratio -&gt; 1.875</programlisting>
</para>
</formalpara>
<simpara>é€šè¿‡é“¾æ¥<literal>@alignCast</literal>ã€<literal>@ptrCast</literal>å’Œ<literal>@bitCast</literal>ï¼Œä½ å¯ä»¥æ˜¾å¼åœ°æ–­è¨€å¸ƒå±€å…³ç³»ï¼Œè€Œåç»­çš„<literal>@truncate</literal>/<literal>@intCast</literal>è½¬æ¢åœ¨è·¨APIç¼©å°æˆ–æ‰©å¤§æ—¶ä¿æŒæ•´æ•°å®½åº¦çš„è¯šå®æ€§ã€‚</simpara>
</section>
</chapter>
<chapter xml:id="notes-caveats">
<title>æ³¨æ„äº‹é¡¹</title>
<itemizedlist>
<listitem>
<simpara>å“¨å…µç»ˆæ­¢æŒ‡é’ˆéå¸¸é€‚åˆCæ¡¥æ¥ï¼Œä½†åœ¨Zigå†…éƒ¨ä¼˜å…ˆä½¿ç”¨åˆ‡ç‰‡ï¼Œä»¥ä¾¿è¾¹ç•Œæ£€æŸ¥ä¿æŒå¯ç”¨å¹¶ä¸”APIæš´éœ²é•¿åº¦ã€‚</simpara>
</listitem>
<listitem>
<simpara>ä½¿ç”¨<literal>@alignCast</literal>å‡çº§æŒ‡é’ˆå¯¹é½æ–¹å¼åœ¨Debugæ¨¡å¼ä¸‹å¦‚æœåœ°å€æœªå¯¹é½ä»ç„¶ä¼šé™·å…¥é™·é˜±â€”â€”åœ¨æå‡ä¹‹å‰è¯æ˜å‰ææ¡ä»¶ã€‚</simpara>
</listitem>
<listitem>
<simpara>å¤šé¡¹ç›®æŒ‡é’ˆï¼ˆ<literal>[*]T</literal>ï¼‰ä¸¢å¼ƒè¾¹ç•Œæ£€æŸ¥ï¼›è°¨æ…ä½¿ç”¨å®ƒä»¬å¹¶è®°å½•å®‰å…¨åˆ‡ç‰‡ä¼šå¼ºåˆ¶æ‰§è¡Œçš„ä¸å˜é‡ã€‚</simpara>
</listitem>
</itemizedlist>
</chapter>
<chapter xml:id="exercises">
<title>ç»ƒä¹ </title>
<itemizedlist>
<listitem>
<simpara>æ‰©å±•<literal>arrays_and_slices.zig</literal>ä»¥ä»è¿è¡Œæ—¶æ•°ç»„åˆ›å»ºé›¶é•¿åº¦å¯å˜åˆ‡ç‰‡ï¼Œç„¶åé€šè¿‡<literal>std.ArrayList</literal>è¿½åŠ ä»¥è§‚å¯Ÿåˆ‡ç‰‡è§†å›¾å¦‚ä½•ä¿æŒæœ‰æ•ˆã€‚</simpara>
</listitem>
<listitem>
<simpara>ä¿®æ”¹<literal>sentinel_strings.zig</literal>ä»¥æ¥å—ç”¨æˆ·æä¾›çš„<literal>[:0]u8</literal>ï¼Œå¹¶é€šè¿‡è¿”å›é”™è¯¯è”åˆæ¥é˜²æ­¢ç¼ºå°‘å“¨å…µçš„è¾“å…¥ã€‚</simpara>
</listitem>
<listitem>
<simpara>é€šè¿‡æ·»åŠ ä¸€ä¸ªåœ¨æˆªæ–­å‰æ‹’ç»ä½å­—èŠ‚ä¸ºé›¶çš„å€¼çš„åˆ†æ”¯æ¥å¢å¼º<literal>alignment_and_casts.zig</literal>ï¼Œå±•ç¤º<literal>@intCast</literal>å¦‚ä½•ä¾èµ–äºè°ƒç”¨è€…æä¾›çš„èŒƒå›´ä¿è¯ã€‚</simpara>
</listitem>
</itemizedlist>
</chapter>
</book>